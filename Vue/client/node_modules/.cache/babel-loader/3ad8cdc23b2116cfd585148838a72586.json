{"ast":null,"code":"import \"core-js/modules/es.array.find.js\";\nimport \"core-js/modules/es.object.to-string.js\";\n// Utilities\nimport { onBeforeUnmount, ref, watch } from 'vue';\nimport { SUPPORTS_INTERSECTION } from \"../util/index.mjs\";\nexport function useIntersectionObserver(callback) {\n  var intersectionRef = ref();\n  var isIntersecting = ref(false);\n\n  if (SUPPORTS_INTERSECTION) {\n    var observer = new IntersectionObserver(function (entries) {\n      callback == null ? void 0 : callback(entries, observer);\n      isIntersecting.value = !!entries.find(function (entry) {\n        return entry.isIntersecting;\n      });\n    });\n    onBeforeUnmount(function () {\n      observer.disconnect();\n    });\n    watch(intersectionRef, function (newValue, oldValue) {\n      if (oldValue) {\n        observer.unobserve(oldValue);\n        isIntersecting.value = false;\n      }\n\n      if (newValue) observer.observe(newValue);\n    }, {\n      flush: 'post'\n    });\n  }\n\n  return {\n    intersectionRef: intersectionRef,\n    isIntersecting: isIntersecting\n  };\n}","map":{"version":3,"mappings":";;AAAA;AACA,SAASA,eAAT,EAA0BC,GAA1B,EAA+BC,KAA/B,QAA4C,KAA5C;SACSC,6B;AAET,OAAO,SAASC,uBAAT,CAAkCC,QAAlC,EAA2E;AAChF,MAAMC,eAAe,GAAGL,GAAG,EAA3B;AACA,MAAMM,cAAc,GAAGN,GAAG,CAAC,KAAD,CAA1B;;AAEA,MAAIE,qBAAJ,EAA2B;AACzB,QAAMK,QAAQ,GAAG,IAAIC,oBAAJ,CAA0BC,iBAAD,EAA0C;AAClFL,cAAQ,QAARA,oBAAQ,CAAGK,OAAH,EAAYF,QAAZ,CAARH;AAEAE,oBAAc,CAACI,KAAfJ,GAAuB,CAAC,CAACG,OAAO,CAACE,IAARF,CAAaG,eAAK;AAAA,eAAIA,KAAK,CAACN,cAAV;AAAA,OAAlBG,CAAzBH;AAHe,MAAjB;AAMAP,mBAAe,CAAC,YAAM;AACpBQ,cAAQ,CAACM,UAATN;AADa,MAAfR;AAIAE,SAAK,CAACI,eAAD,EAAkB,UAACS,QAAD,EAAWC,QAAX,EAAwB;AAC7C,UAAIA,QAAJ,EAAc;AACZR,gBAAQ,CAACS,SAATT,CAAmBQ,QAAnBR;AACAD,sBAAc,CAACI,KAAfJ,GAAuB,KAAvBA;AACD;;AAED,UAAIQ,QAAJ,EAAcP,QAAQ,CAACU,OAATV,CAAiBO,QAAjBP;AANX,OAOF;AACDW,WAAK,EAAE;AADN,KAPE,CAALjB;AAUD;;AAED,SAAO;AAAEI,mBAAF,EAAEA,eAAF;AAAmBC;AAAnB,GAAP;AACD","names":["onBeforeUnmount","ref","watch","SUPPORTS_INTERSECTION","useIntersectionObserver","callback","intersectionRef","isIntersecting","observer","IntersectionObserver","entries","value","find","entry","disconnect","newValue","oldValue","unobserve","observe","flush"],"sources":["../../src/composables/intersectionObserver.ts"],"sourcesContent":["// Utilities\nimport { onBeforeUnmount, ref, watch } from 'vue'\nimport { SUPPORTS_INTERSECTION } from '@/util'\n\nexport function useIntersectionObserver (callback?: IntersectionObserverCallback) {\n  const intersectionRef = ref<HTMLElement>()\n  const isIntersecting = ref(false)\n\n  if (SUPPORTS_INTERSECTION) {\n    const observer = new IntersectionObserver((entries: IntersectionObserverEntry[]) => {\n      callback?.(entries, observer)\n\n      isIntersecting.value = !!entries.find(entry => entry.isIntersecting)\n    })\n\n    onBeforeUnmount(() => {\n      observer.disconnect()\n    })\n\n    watch(intersectionRef, (newValue, oldValue) => {\n      if (oldValue) {\n        observer.unobserve(oldValue)\n        isIntersecting.value = false\n      }\n\n      if (newValue) observer.observe(newValue)\n    }, {\n      flush: 'post',\n    })\n  }\n\n  return { intersectionRef, isIntersecting }\n}\n"]},"metadata":{},"sourceType":"module"}