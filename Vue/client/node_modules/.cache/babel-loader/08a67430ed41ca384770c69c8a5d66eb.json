{"ast":null,"code":"import \"core-js/modules/es.number.constructor.js\";\nimport \"core-js/modules/es.object.to-string.js\";\nimport \"core-js/modules/es.parse-int.js\";\nimport \"core-js/modules/web.timers.js\";\n// Utilities\nimport { IN_BROWSER, propsFactory } from \"../util/index.mjs\"; // Types\n// Composables\n\nexport var makeDelayProps = propsFactory({\n  closeDelay: [Number, String],\n  openDelay: [Number, String]\n}, 'delay');\nexport function useDelay(props, cb) {\n  var delays = {};\n\n  var runDelayFactory = function runDelayFactory(prop) {\n    return function () {\n      // istanbul ignore next\n      if (!IN_BROWSER) return Promise.resolve(true);\n      var active = prop === 'openDelay';\n      delays.closeDelay && window.clearTimeout(delays.closeDelay);\n      delete delays.closeDelay;\n      delays.openDelay && window.clearTimeout(delays.openDelay);\n      delete delays.openDelay;\n      return new Promise(function (resolve) {\n        var _props$prop;\n\n        var delay = parseInt((_props$prop = props[prop]) != null ? _props$prop : 0, 10);\n        delays[prop] = window.setTimeout(function () {\n          cb == null ? void 0 : cb(active);\n          resolve(active);\n        }, delay);\n      });\n    };\n  };\n\n  return {\n    runCloseDelay: runDelayFactory('closeDelay'),\n    runOpenDelay: runDelayFactory('openDelay')\n  };\n}","map":{"version":3,"mappings":";;;;AAAA;SACSA,YAAYC,oB,qBAErB;AAMA;;AACA,OAAO,IAAMC,cAAc,GAAGD,YAAY,CAAC;AACzCE,YAAU,EAAE,CAACC,MAAD,EAASC,MAAT,CAD6B;AAEzCC,WAAS,EAAE,CAACF,MAAD,EAASC,MAAT;AAF8B,CAAD,EAGvC,OAHuC,CAAnC;AAKP,OAAO,SAASE,QAAT,CAAmBC,KAAnB,EAAsCC,EAAtC,EAAqE;AAC1E,MAAMC,MAAiD,GAAG,EAA1D;;AACA,MAAMC,eAAe,GAAIC,SAAnBD,eAAmBC,KAAD;AAAA,WAA4B,YAAwB;AAC1E;AACA,UAAI,CAACZ,UAAL,EAAiB,OAAOa,OAAO,CAACC,OAARD,CAAgB,IAAhBA,CAAP;AAEjB,UAAME,MAAM,GAAGH,IAAI,KAAK,WAAxB;AAEAF,YAAM,CAACP,UAAPO,IAAqBM,MAAM,CAACC,YAAPD,CAAoBN,MAAM,CAACP,UAA3Ba,CAArBN;AACA,aAAOA,MAAM,CAACP,UAAd;AAEAO,YAAM,CAACJ,SAAPI,IAAoBM,MAAM,CAACC,YAAPD,CAAoBN,MAAM,CAACJ,SAA3BU,CAApBN;AACA,aAAOA,MAAM,CAACJ,SAAd;AAEA,aAAO,IAAIO,OAAJ,CAAYC,iBAAO,EAAI;AAAA;;AAC5B,YAAMI,KAAK,GAAGC,QAAQ,gBAACX,KAAK,CAACI,IAAD,CAAN,0BAAgB,CAAhB,EAAmB,EAAnB,CAAtB;AAEAF,cAAM,CAACE,IAAD,CAANF,GAAeM,MAAM,CAACI,UAAPJ,CAAkB,YAAM;AACrCP,YAAE,QAAFA,cAAE,CAAGM,MAAH,CAAFN;AACAK,iBAAO,CAACC,MAAD,CAAPD;AAFa,WAGZI,KAHYF,CAAfN;AAHK,QAAP;AAZF,KAAwB;AAAA,GAAxB;;AAsBA,SAAO;AACLW,iBAAa,EAAEV,eAAe,CAAC,YAAD,CADzB;AAELW,gBAAY,EAAEX,eAAe,CAAC,WAAD;AAFxB,GAAP;AAID","names":["IN_BROWSER","propsFactory","makeDelayProps","closeDelay","Number","String","openDelay","useDelay","props","cb","delays","runDelayFactory","prop","Promise","resolve","active","window","clearTimeout","delay","parseInt","setTimeout","runCloseDelay","runOpenDelay"],"sources":["../../src/composables/delay.ts"],"sourcesContent":["// Utilities\nimport { IN_BROWSER, propsFactory } from '@/util'\n\n// Types\nexport interface DelayProps {\n  closeDelay?: number | string\n  openDelay?: number | string\n}\n\n// Composables\nexport const makeDelayProps = propsFactory({\n  closeDelay: [Number, String],\n  openDelay: [Number, String],\n}, 'delay')\n\nexport function useDelay (props: DelayProps, cb?: (value: boolean) => void) {\n  const delays: Partial<Record<keyof DelayProps, number>> = {}\n  const runDelayFactory = (prop: keyof DelayProps) => (): Promise<boolean> => {\n    // istanbul ignore next\n    if (!IN_BROWSER) return Promise.resolve(true)\n\n    const active = prop === 'openDelay'\n\n    delays.closeDelay && window.clearTimeout(delays.closeDelay)\n    delete delays.closeDelay\n\n    delays.openDelay && window.clearTimeout(delays.openDelay)\n    delete delays.openDelay\n\n    return new Promise(resolve => {\n      const delay = parseInt(props[prop] ?? 0, 10)\n\n      delays[prop] = window.setTimeout(() => {\n        cb?.(active)\n        resolve(active)\n      }, delay)\n    })\n  }\n\n  return {\n    runCloseDelay: runDelayFactory('closeDelay'),\n    runOpenDelay: runDelayFactory('openDelay'),\n  }\n}\n"]},"metadata":{},"sourceType":"module"}