{"ast":null,"code":"import _slicedToArray from \"D:/Stage/App/xr-place-application/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";\nimport _asyncToGenerator from \"D:/Stage/App/xr-place-application/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport \"regenerator-runtime/runtime.js\";\nimport \"core-js/modules/es.object.to-string.js\";\nimport \"core-js/modules/es.array.concat.js\";\nimport \"core-js/modules/es.array.map.js\";\nimport \"core-js/modules/es.regexp.exec.js\";\nimport \"core-js/modules/es.string.split.js\";\nimport \"core-js/modules/es.parse-float.js\";\nimport { createVNode as _createVNode, mergeProps as _mergeProps, resolveDirective as _resolveDirective } from \"vue\";\nimport { Transition } from 'vue';\nimport { acceleratedEasing, deceleratedEasing, defineComponent, nullifyTransforms } from \"../../util/index.mjs\";\nexport var VDialogTransition = defineComponent({\n  name: 'VDialogTransition',\n  props: {\n    target: Object\n  },\n  setup: function setup(props, _ref) {\n    var slots = _ref.slots;\n    var functions = {\n      onBeforeEnter: function onBeforeEnter(el) {\n        el.style.pointerEvents = 'none';\n      },\n      onEnter: function onEnter(el, done) {\n        return _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee() {\n          var _getDimensions, x, y, animation;\n\n          return regeneratorRuntime.wrap(function _callee$(_context) {\n            while (1) {\n              switch (_context.prev = _context.next) {\n                case 0:\n                  _context.next = 2;\n                  return new Promise(function (resolve) {\n                    return requestAnimationFrame(resolve);\n                  });\n\n                case 2:\n                  _getDimensions = getDimensions(props.target, el), x = _getDimensions.x, y = _getDimensions.y;\n                  animation = el.animate([{\n                    transform: \"translate(\".concat(x, \"px, \").concat(y, \"px) scale(0.1)\"),\n                    opacity: 0\n                  }, {\n                    transform: ''\n                  }], {\n                    duration: 225,\n                    easing: deceleratedEasing\n                  });\n                  animation.finished.then(function () {\n                    return done();\n                  });\n\n                case 5:\n                case \"end\":\n                  return _context.stop();\n              }\n            }\n          }, _callee);\n        }))();\n      },\n      onAfterEnter: function onAfterEnter(el) {\n        el.style.removeProperty('pointer-events');\n      },\n      onBeforeLeave: function onBeforeLeave(el) {\n        el.style.pointerEvents = 'none';\n      },\n      onLeave: function onLeave(el, done) {\n        return _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee2() {\n          var _getDimensions2, x, y, animation;\n\n          return regeneratorRuntime.wrap(function _callee2$(_context2) {\n            while (1) {\n              switch (_context2.prev = _context2.next) {\n                case 0:\n                  _context2.next = 2;\n                  return new Promise(function (resolve) {\n                    return requestAnimationFrame(resolve);\n                  });\n\n                case 2:\n                  _getDimensions2 = getDimensions(props.target, el), x = _getDimensions2.x, y = _getDimensions2.y;\n                  animation = el.animate([{\n                    transform: ''\n                  }, {\n                    transform: \"translate(\".concat(x, \"px, \").concat(y, \"px) scale(0.1)\"),\n                    opacity: 0\n                  }], {\n                    duration: 125,\n                    easing: acceleratedEasing\n                  });\n                  animation.finished.then(function () {\n                    return done();\n                  });\n\n                case 5:\n                case \"end\":\n                  return _context2.stop();\n              }\n            }\n          }, _callee2);\n        }))();\n      },\n      onAfterLeave: function onAfterLeave(el) {\n        el.style.removeProperty('pointer-events');\n      }\n    };\n    return function () {\n      return props.target ? _createVNode(Transition, _mergeProps({\n        \"name\": \"dialog-transition\"\n      }, functions, {\n        \"css\": false\n      }), slots) : _createVNode(Transition, {\n        \"name\": \"dialog-transition\"\n      }, slots);\n    };\n  }\n});\n\nfunction getDimensions(target, el) {\n  var targetBox = target.getBoundingClientRect();\n  var elBox = nullifyTransforms(el);\n\n  var _getComputedStyle$tra = getComputedStyle(el).transformOrigin.split(' ').map(function (v) {\n    return parseFloat(v);\n  }),\n      _getComputedStyle$tra2 = _slicedToArray(_getComputedStyle$tra, 2),\n      originX = _getComputedStyle$tra2[0],\n      originY = _getComputedStyle$tra2[1];\n\n  var _getComputedStyle$get = getComputedStyle(el).getPropertyValue('--v-overlay-anchor-origin').split(' '),\n      _getComputedStyle$get2 = _slicedToArray(_getComputedStyle$get, 2),\n      anchorSide = _getComputedStyle$get2[0],\n      anchorOffset = _getComputedStyle$get2[1];\n\n  var offsetX = targetBox.left + targetBox.width / 2;\n\n  if (anchorSide === 'left' || anchorOffset === 'left') {\n    offsetX -= targetBox.width / 2;\n  } else if (anchorSide === 'right' || anchorOffset === 'right') {\n    offsetX += targetBox.width / 2;\n  }\n\n  var offsetY = targetBox.top + targetBox.height / 2;\n\n  if (anchorSide === 'top' || anchorOffset === 'top') {\n    offsetY -= targetBox.height / 2;\n  } else if (anchorSide === 'bottom' || anchorOffset === 'bottom') {\n    offsetY += targetBox.height / 2;\n  }\n\n  return {\n    x: offsetX - (originX + elBox.left),\n    y: offsetY - (originY + elBox.top)\n  };\n}","map":{"version":3,"mappings":"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","names":["Transition","acceleratedEasing","deceleratedEasing","defineComponent","nullifyTransforms","VDialogTransition","name","props","target","Object","setup","_ref","slots","functions","onBeforeEnter","el","style","pointerEvents","onEnter","done","Promise","resolve","requestAnimationFrame","getDimensions","x","y","animation","animate","transform","opacity","duration","easing","finished","then","onAfterEnter","removeProperty","onBeforeLeave","onLeave","onAfterLeave","targetBox","getBoundingClientRect","elBox","getComputedStyle","transformOrigin","split","map","v","parseFloat","originX","originY","getPropertyValue","anchorSide","anchorOffset","offsetX","left","width","offsetY","top","height"],"sources":["../../../src/components/transitions/dialog-transition.tsx"],"sourcesContent":["import type { PropType } from 'vue'\nimport { Transition } from 'vue'\nimport { acceleratedEasing, deceleratedEasing, defineComponent, nullifyTransforms } from '@/util'\n\nexport const VDialogTransition = defineComponent({\n  name: 'VDialogTransition',\n\n  props: {\n    target: Object as PropType<HTMLElement>,\n  },\n\n  setup (props, { slots }) {\n    const functions = {\n      onBeforeEnter (el: Element) {\n        (el as HTMLElement).style.pointerEvents = 'none'\n      },\n      async onEnter (el: Element, done: () => void) {\n        await new Promise(resolve => requestAnimationFrame(resolve))\n\n        const { x, y } = getDimensions(props.target!, el as HTMLElement)\n\n        const animation = el.animate([\n          { transform: `translate(${x}px, ${y}px) scale(0.1)`, opacity: 0 },\n          { transform: '' },\n        ], {\n          duration: 225,\n          easing: deceleratedEasing,\n        })\n        animation.finished.then(() => done())\n      },\n      onAfterEnter (el: Element) {\n        (el as HTMLElement).style.removeProperty('pointer-events')\n      },\n      onBeforeLeave (el: Element) {\n        (el as HTMLElement).style.pointerEvents = 'none'\n      },\n      async onLeave (el: Element, done: () => void) {\n        await new Promise(resolve => requestAnimationFrame(resolve))\n\n        const { x, y } = getDimensions(props.target!, el as HTMLElement)\n\n        const animation = el.animate([\n          { transform: '' },\n          { transform: `translate(${x}px, ${y}px) scale(0.1)`, opacity: 0 },\n        ], {\n          duration: 125,\n          easing: acceleratedEasing,\n        })\n        animation.finished.then(() => done())\n      },\n      onAfterLeave (el: Element) {\n        (el as HTMLElement).style.removeProperty('pointer-events')\n      },\n    }\n\n    return () => {\n      return props.target\n        ? (\n          <Transition\n            name=\"dialog-transition\"\n            { ...functions }\n            css={ false }\n            v-slots={ slots }\n          />\n        )\n        : <Transition name=\"dialog-transition\" v-slots={ slots } />\n    }\n  },\n})\n\nfunction getDimensions (target: HTMLElement, el: HTMLElement) {\n  const targetBox = target.getBoundingClientRect()\n  const elBox = nullifyTransforms(el)\n  const [originX, originY] = getComputedStyle(el).transformOrigin.split(' ').map(v => parseFloat(v))\n\n  const [anchorSide, anchorOffset] = getComputedStyle(el).getPropertyValue('--v-overlay-anchor-origin').split(' ')\n\n  let offsetX = targetBox.left + targetBox.width / 2\n  if (anchorSide === 'left' || anchorOffset === 'left') {\n    offsetX -= targetBox.width / 2\n  } else if (anchorSide === 'right' || anchorOffset === 'right') {\n    offsetX += targetBox.width / 2\n  }\n\n  let offsetY = targetBox.top + targetBox.height / 2\n  if (anchorSide === 'top' || anchorOffset === 'top') {\n    offsetY -= targetBox.height / 2\n  } else if (anchorSide === 'bottom' || anchorOffset === 'bottom') {\n    offsetY += targetBox.height / 2\n  }\n\n  return {\n    x: offsetX - (originX + elBox.left),\n    y: offsetY - (originY + elBox.top),\n  }\n}\n"]},"metadata":{},"sourceType":"module"}